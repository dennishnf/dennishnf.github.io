<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr">


<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<link rel="stylesheet" type="text/css" href="/reset.css" media="screen">
<link rel="stylesheet" type="text/css" href="/style.css" media="screen">
<!--[if lte IE 7]><link rel="stylesheet" type="text/css" href="ie_fixes.css" media="screen" /><![endif]-->
<title>Dennis Núñez-Fernández</title>

<!-- Favicon of the website -->
<link rel="shortcut icon" href="/icon.ico?" type="image/x-icon" />
<link rel="icon" href="/icon.ico?" type="image/ico" />

<style type="text/css">:root .adsbygoogle,
:root #header + #content > #left > #rlblock_left,
:root #content > #right > .dose > .dosesingle,
:root #content > #center > .dose > .dosesingle
{display:none !important;}</style>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115924652-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115924652-1');
</script>

</head>


<body>
<div id="paper_left">
<div id="paper_right">
<div id="layout_wrapper">
<div id="layout_container">
<div id="layout_content">
<div id="site_title">
<h1><b><a href="https://dennishnf.com/">Dennis Núñez-Fernández</a></b></h1>
<h2>BSc in Electronic Engineering, Universidad Nacional de Ingeniería (UNI)</h2>
</div>
<div class="navigation">
<ul>
<li><a href="/index.html">Home</a></li>
<li><a href="/research/research.html">Research</a></li>
<li><a href="/posts/posts.html">Posts</a></li>
<li><a href="/gallery/gallery.html">Gallery</a></li>
<li><a href="/contact/contact.html">Contact</a></li>
<li><a href="/curriculum/curriculum.html">Curriculum</a></li>
</ul>
<div class="clearer">&nbsp;</div>
</div>

<div id="main">

<div class="post">
<div class="post_body">
<br/>

<h2>Face detection using Haar Cascades on OpenCV 2.4</h2>

<p align="justify">Create a folder <custom_code>facedetector</custom_code>. In this folder open up a new file, name it <custom_code>facedetector.cpp</custom_code>, and insert the following code (the files <custom_code>facedetector.cpp</custom_code> and <custom_code>haarcascade_frontalface_alt.xml</custom_code> are included in this [<a target="_blank" href="https://dennishnf.github.io/posts/technical/2014-09_face_detection_using_haar_cascades_on_opencv_2-4/face_detector.zip">link</a>]:</p>
<p><code class="barcode">#include &lt;opencv2/opencv.hpp&gt;
#include &lt;opencv2/objdetect/objdetect.hpp&gt;
#include &lt;opencv2/highgui/highgui.hpp&gt;
#include &lt;opencv2/imgproc/imgproc.hpp&gt;
#include &lt;opencv2/legacy/legacy.hpp&gt;
#include &lt;iostream&gt;
#include &lt;stdio.h&gt;
     
using namespace std;
using namespace cv;
     
//global variables
String cascade_name = "haarcascade_frontalface_alt.xml";
CascadeClassifier cascade;
     
     
//main function
int main(int argc, const char** argv)
{
     
  CvCapture* capture;
  Mat frame;
  Mat frameout;
    
  //load the cascades
  if(!cascade.load(cascade_name)){
    printf("--(!)Error loading\n"); 
    return -1; 
  }
     
  //read the video stream
  capture = cvCaptureFromCAM(-1);
    
  if(capture)  {
     
    while(true)  {
       
      frame = cvQueryFrame(capture);
      
      if(!frame.empty()) {
      }
      else {
        printf(" --(!) No captured frame -- Break!"); 
        break;
      }
      
      //FACE DETECTION
      std::vector&lt;Rect&gt; faces;
      Mat frame_gray;
      
      cvtColor( frame, frame_gray, CV_BGR2GRAY );
      equalizeHist( frame_gray, frame_gray );
      
      cascade.detectMultiScale( frame_gray, faces, 1.1, 2, 0|CV_HAAR_SCALE_IMAGE, Size(30, 30) );
      
      for( size_t i = 0; i &lt; faces.size(); i++ ) {
        int point1x =  faces[i].x;
        int point1y = faces[i].y;
        int lengthxy = faces[i].width;
        rectangle(frame, Point(point1x,point1y), Point(point1x+lengthxy,point1y+lengthxy), Scalar(0,0,255), 1, 8, 0 );
        imshow("Face detection", frame );
      }
      
      int c = waitKey(10);
      if((char)c == 'q') { 
        break; 
      }
    
    }
  }
    
  return 0;
     
}
</code></p>

<p align="justify">Then, compile:</p>
<p><code class="barcode">g++ -I/usr/local/include/opencv -I/usr/local/include/opencv2 -L/usr/local/lib/ -g -o binary  facedetector.cpp -lopencv_core -lopencv_imgproc -lopencv_highgui -lopencv_ml -lopencv_imgproc -lopencv_video -lopencv_features2d -lopencv_calib3d -lopencv_objdetect -lopencv_contrib -lopencv_legacy -lopencv_stitching -o facedetector
</code></p>

<p align="justify">Finally, run the program:</p>
<p><code class="barcode">$ ./facedetector
</code></p>

<p align="justify">The command above should show the next result:</p>

<center><img src="https://dennishnf.github.io/posts/technical/2014-09_face_detection_using_haar_cascades_on_opencv_2-4/facedetector.png" style="padding-top:8px; padding-bottom: 8px;" /></center>




<br/>
</div>
</div>



</div>



<div id="footer">
<div class="left">© 2013–2021 Dennis H. Núñez Fernández <br/>  <!-- </div> 
<div class="clearer">&nbsp;</div>
</div>

</div>
</div>
</div>
</div>
</div>

</body></html> -->
<a href="https://dennishnf.com/README.html" target="_blank">From scratch in Python. Powered by Linux</a> <br/>
Website updated:&nbsp;&nbsp;2021-05-10&nbsp;&nbsp;16:20 GMT <br/> 
</div> 
<div class="clearer">&nbsp;</div> 
</div> 
</div> 
</div> 
</div> 
</div> 
</div> 
</body> 


</html> 
